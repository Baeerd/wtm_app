/*
 * File: app/view/MenuView.js
 *
 * This file was generated by Sencha Architect version 3.0.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Sencha Touch 2.3.x library, under independent license.
 * License of Sencha Architect does not include license for Sencha Touch 2.3.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('SYSM.view.MenuView', {
    extend: 'Ext.Container',
    alias: 'widget.menuview',

    requires: [
        'Ext.Button',
        'Ext.dataview.DataView'
    ],

    config: {
        // cls: 'menu_view_bg',
        id: 'menuView',
        layout: 'vbox',
        items: [
            {
                xtype: 'container',
                height: 80,
                layout: 'fit',
                items: [
                    {
                        xtype: 'container',
                        cls: [
                            'menu_item_bg'
                        ],
                        height: 80,
                        zIndex: 1,
                        layout: {
                            type: 'hbox',
                            align: 'center',
                            pack: 'center'
                        },
                        items: [
                            {
                                xtype: 'container',
                                cls: [
                                    'base_font_family',
                                    'title_font_size'
                                ],
                                html: '首页',
                            }
                        ]
                    },
                    {
                        xtype: 'container',
                        height: 80,
                        zIndex: 2,
                        layout: {
                            type: 'hbox',
                            align: 'center',
                            pack: 'center'
                        },
                        items: [
                            {
                                xtype: 'container',
                                flex: 1
                            },
                            {
                                xtype: 'container',
                                items: [
                                    {
                                        xtype: 'button',
                                        cls: [
                                            'menu_item_bg',
                                            'base_font_family'
                                        ],
                                        itemId: 'mybutton8',
                                        margin: '0 5 0 auto',
                                        text: '注销'
                                    }
                                ]
                            }
                        ]
                    }
                ]
            },
            {
                xtype: 'dataview',
                flex: 1,
                itemId: 'menuDataView',
                padding: '2%',
                scrollable: 'vertical',
                defaultType: 'menuDataItem',
                inline: true,
                store: 'MenuDataViewStore',
                useComponents: true
            }
        ],
        listeners: [
            {
                fn: 'onMybutton8Tap',
                event: 'tap',
                delegate: '#mybutton8'
            },
            {
                fn: 'onMenuDataViewItemTap',
                event: 'itemtap',
                delegate: '#menuDataView'
            },
            {
                fn: 'onMenuViewHide',
                event: 'hide'
            },
            {
                fn: 'onMenuViewDestroy',
                event: 'destroy'
            }
        ]
    },

    onMybutton8Tap: function(button, e, eOpts) {
        // var root = button.up('#root');
        // var loginView = root.down('#loginView');
        // var slide = Ext.create("Ext.fx.layout.card.Slide",{direction:"right"});
        // root.animateActiveItem(loginView,slide);

        console.log('menu pop');
        var root = Ext.getCmp('rootView');
        root.pop();
        //销毁垛位选择界面，，下次使用时重新初始化
        var targetSelectDialog = Ext.getCmp('targetSelectDialog');
        if (targetSelectDialog) {
            //     console.log(targetSelectDialog);
            targetSelectDialog.destroy();
        } else {

        }
    },

    onMenuDataViewItemTap: function(dataview, index, target, record, e, eOpts) {
        Ext.Viewport.setMasked({
            xtype: 'loadmask',
            message: '请稍候......'
        });
        // var label = record.get('label');
        var label = record.get('RES_ID');
        var root = dataview.up('#root');
        var root = Ext.getCmp('rootView');
        var slide = Ext.create("Ext.fx.layout.card.Slide",{direction:"left"});
        console.log('label = '+label);
        var targetView;

        setTimeout(function(){
            //  分切入库
            if ('APP_CUT_INBOUND' ===label) {
                targetView = Ext.create('SYSM.view.CutInboundView');
                root.push(targetView);
            }
            //  倒剁
            else if ('APP_DAODUO' ===label) {
                targetView = Ext.create('SYSM.view.WtmDaoduoView');
                root.push(targetView);
            }
            //   盘库
            else if ('APP_PANKU' ===label) {
                targetView = Ext.create('SYSM.view.WtmPankuView');
                root.push(targetView);
            }
            //     else if ('扫码倒垛' ===label) {
            else if ('SL-MOBILE-01' ===label) {
                targetView = Ext.create('SYSM.view.TargetChangeingView');
                root.push(targetView);
            }
            //             else if ('盘库确认' ===label) {
            else if ('SL-MOBILE-04' ===label) {
                targetView = Ext.create('SYSM.view.StoreCheck');
                root.push(targetView);
            }
            //                     else if ('标签核对' ===label) {
            else if ('SL-MOBILE-06' ===label) {
                targetView = Ext.create('SYSM.view.TagCheck');
                root.push(targetView);
            }
            //                         else if ('有计划投料' ===label) {
            else if ('SL-MOBILE-08' ===label) {
                targetView = Ext.create('SYSM.view.PlannedFeeding');
                var PlanNumberJsonStore = Ext.getStore('PlanNumberJsonStore');
                PlanNumberJsonStore.removeAll();
                Ext.getStore('PlannedFeedingJsonStore').removeAll();
                root.push(targetView);
            }
            else if ('SL-MOBILE-07' ===label) {
                targetView = Ext.create('SYSM.view.CheckSampleView');
                root.push(targetView);
            }

            Ext.Viewport.setMasked(false);
        },1000);

    },

    onMenuViewHide: function(component, eOpts) {
        // component.destroy();
    },

    onMenuViewDestroy: function(eOpts) {
        console.log('destroy');
    }

});